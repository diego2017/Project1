<% if @current_user %>
  <h4>Welcome <%= @current_user.name %>!</h4>
<%end%>
<h1> Cool places in Sydney </h1>

<% if @current_user %>
  <button class="ui button"><%= link_to "Add a cool place", new_place_path  %></button>
<%end%>

<ul>
  <% @places.each do |place| %>
    <li>
      <%= link_to place.name, place_path(place.id) %>
    </li>
  <%end%>
</ul>


<!-- ###################### map test   -->


  <div id="map"></div>

<script>
  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 11,
      center: {lat: -33.8697753, lng: 151.2059688}
    })
    var places = [
      <%@places.each do |location|%>
        ['<%= location.name %>', <%= location.latitude%>, <%= location.longitude %>],
      <%end%>
    ];
    places.forEach(function(location){
      new google.maps.Marker({
        map: map,
        position: {lat: location[1], lng: location[2]},
        title: location[0]
      });
    })
  }
</script>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDSawZrR6b_qDsmiGyxDwf65TpYlrdUz6o&callback=initMap">
</script>
